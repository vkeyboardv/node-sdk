// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Stream lambda depth based desn't skip processed records by default 1`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 900,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based desn't skip processed records by default 2`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 900,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based desn't skip processed records when disabled in settings 1`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 900,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based desn't skip processed records when disabled in settings 2`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 800,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 900,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based skips processed records 1`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based skips processed records 2`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1000,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1100,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1200,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda depth based updates last processed only if new max value > previous 1`] = `
[
  StreamDepthEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "depth",
      "source_type": "drilling",
    },
    "records": [
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1400,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1500,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1600,
        "version": 1,
      },
      StreamDepthRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "measured_depth": 1300,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based all records already processed 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based all records already processed 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based doesn't skip processed records if disabled in stettings 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based doesn't skip processed records if disabled in stettings 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based map records 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based map records 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based no last time in state 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based no last time in state 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based process completed wits 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": true,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based process completed wits 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": true,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Some unnecessary drilling that's excluded",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300800,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "collection": "wits",
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based skips processed records 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based skips processed records 2`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 1,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drillout",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546300900,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 99.9,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301000,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.3,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301100,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.5,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301200,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 1,
        "company_id": 24,
        "data": {
          "hole_depth": 100.6,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
    ],
  },
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;

exports[`Stream lambda time based updates last processed only if new max value > previous 1`] = `
[
  StreamTimeEvent {
    "app_connection": 123,
    "app_stream_id": 123,
    "asset_id": 2,
    "company_id": 24,
    "followable": false,
    "has_secrets": false,
    "is_completed": false,
    "metadata": {
      "app_stream_id": 123,
      "apps": {
        "stream.test-app": {
          "app_connection_id": 123,
        },
      },
      "log_type": "time",
      "source_type": "drilling",
    },
    "records": [
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Rotary Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301300,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301400,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301500,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301600,
        "version": 1,
      },
      StreamTimeRecord {
        "asset_id": 2,
        "company_id": 24,
        "data": {
          "hole_depth": 99.4,
          "state": "Slide Drilling",
          "weight_on_bit": 1,
        },
        "timestamp": 1546301501,
        "version": 1,
      },
    ],
  },
]
`;
